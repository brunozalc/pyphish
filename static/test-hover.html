<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PyPhish Hover Detection Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f8fafc;
            color: #1e293b;
        }
        h1 {
            color: #0f172a;
            border-bottom: 3px solid #2dd4bf;
            padding-bottom: 10px;
        }
        .section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        h2 {
            color: #334155;
            margin-top: 0;
        }
        .link-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .test-link {
            display: block;
            padding: 15px 20px;
            background: #f1f5f9;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            text-decoration: none;
            color: #0ea5e9;
            font-weight: 500;
            transition: all 0.2s;
        }
        .test-link:hover {
            background: #e0f2fe;
            border-color: #0ea5e9;
            transform: translateX(5px);
        }
        .link-description {
            display: block;
            font-size: 13px;
            color: #64748b;
            margin-top: 5px;
        }
        .instructions {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 4px;
        }
        .instructions h3 {
            margin-top: 0;
            color: #92400e;
        }
        .status {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 10px 15px;
            background: #1e293b;
            color: white;
            border-radius: 6px;
            font-size: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
        }
        code {
            background: #e2e8f0;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: "JetBrains Mono", monospace;
            font-size: 13px;
        }
    </style>
</head>
<body>
    <h1>üîç PyPhish Hover Detection Test Page</h1>

    <div class="instructions">
        <h3>üìã How to Test:</h3>
        <ol>
            <li>Make sure the Flask server is running: <code>python main.py</code></li>
            <li>Load the extension in Firefox</li>
            <li>Hover over the links below for ~250ms</li>
            <li>You should see a tooltip showing the risk level</li>
            <li>Check the browser console (F12) for debug messages</li>
        </ol>
    </div>

    <div class="section">
        <h2>üåê Safe Websites</h2>
        <p>These</p> should show low risk scores:</p>
        <div class="link-list">
            <a href="https://www.google.com" class="test-link">
                Google Search
                <span class="link-description">Expected: Low risk (~18%)</span>
            </a>
            <a href="https://www.github.com" class="test-link">
                GitHub
                <span class="link-description">Expected: Low-Medium risk (~28%)</span>
            </a>
            <a href="https://www.mozilla.org" class="test-link">
                Mozilla
                <span class="link-description">Expected: Low risk</span>
            </a>
            <a href="https://example.com" class="test-link">
                Example.com
                <span class="link-description">Expected: Very low risk (0%)</span>
            </a>
        </div>
    </div>

    <div class="section">
        <h2>‚öΩ Brazilian Websites</h2>
        <p>Test with local domains:</p>
        <div class="link-list">
            <a href="https://www.flamengo.com.br" class="test-link">
                Flamengo (Football Club)
                <span class="link-description">Expected: Low risk (~18%)</span>
            </a>
            <a href="https://www.uol.com.br" class="test-link">
                UOL (News Portal)
                <span class="link-description">Expected: Low risk</span>
            </a>
            <a href="https://www.mercadolivre.com.br" class="test-link">
                Mercado Livre
                <span class="link-description">Expected: Low risk</span>
            </a>
        </div>
    </div>

    <div class="section">
        <h2>üî¨ Edge Cases</h2>
        <p>Test different URL patterns:</p>
        <div class="link-list">
            <a href="https://subdomain.example.com" class="test-link">
                Subdomain Test
                <span class="link-description">Has subdomain</span>
            </a>
            <a href="https://example.com/path/to/page" class="test-link">
                Long Path Test
                <span class="link-description">Has multiple path segments</span>
            </a>
            <a href="https://example.com?param=value&test=123" class="test-link">
                Query Parameters Test
                <span class="link-description">Has query string</span>
            </a>
            <a href="http://example.com" class="test-link">
                HTTP (not HTTPS)
                <span class="link-description">Non-secure protocol</span>
            </a>
        </div>
    </div>

    <div class="section">
        <h2>üö´ Non-HTTP Links (Should be Skipped)</h2>
        <p>These should NOT trigger hover analysis:</p>
        <div class="link-list">
            <a href="javascript:alert('test')" class="test-link">
                JavaScript Link
                <span class="link-description">Should be ignored (not http/https)</span>
            </a>
            <a href="mailto:test@example.com" class="test-link">
                Email Link
                <span class="link-description">Should be ignored (mailto protocol)</span>
            </a>
            <a href="#anchor" class="test-link">
                Anchor Link
                <span class="link-description">Should be ignored (fragment only)</span>
            </a>
        </div>
    </div>

    <div class="section">
        <h2>üêõ Debug Information</h2>
        <p>Open the browser console (F12) to see:</p>
        <ul>
            <li><code>PyPhish: Detected link hover</code> - When you hover over a link</li>
            <li><code>PyPhish: Analyzing link after 250ms delay</code> - When analysis starts</li>
            <li><code>PyPhish: Received result</code> - When analysis completes</li>
            <li><code>PyPhish: Showing tooltip</code> - When tooltip should appear</li>
        </ul>
        <p><strong>If you don't see these messages:</strong></p>
        <ul>
            <li>Check if the content script is loaded (look for "Content scripts" in about:debugging)</li>
            <li>Try reloading this page</li>
            <li>Check if the extension is enabled</li>
        </ul>
    </div>

    <div class="status" id="status">
        Extension Status: <span id="status-text">Checking...</span>
    </div>

    <script>
        // Check if PyPhish extension is loaded
        setTimeout(() => {
            const statusEl = document.getElementById('status-text');
            const tooltips = document.querySelectorAll('.pyphish-tooltip');
            if (tooltips.length > 0) {
                statusEl.textContent = '‚úÖ Extension Loaded';
                statusEl.style.color = '#2dd4bf';
            } else {
                statusEl.textContent = '‚ùå Extension Not Detected';
                statusEl.style.color = '#f87171';
            }
        }, 1000);

        // Log when links are hovered (separate from extension)
        document.querySelectorAll('a').forEach(link => {
            link.addEventListener('mouseenter', () => {
                console.log('[Test Page] Mouse entered link:', link.href);
            });
        });
    </script>
</body>
</html>
